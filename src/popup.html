<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Local Whisper Captions</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <main class="panel">
      <h1>Whisper Captions</h1>

      <label for="model">Model</label>
      <select id="model">
        <option value="Xenova/whisper-tiny.en">English: tiny.en (fastest)</option>
        <option value="Xenova/whisper-base.en">English: base.en</option>
        <option value="Xenova/whisper-small.en">English: small.en</option>
        <option value="Xenova/whisper-medium.en">English: medium.en</option>
        <option value="Xenova/whisper-tiny">Multilingual: tiny</option>
        <option value="Xenova/whisper-base">Multilingual: base</option>
        <option value="Xenova/whisper-small">Multilingual: small</option>
        <option value="Xenova/whisper-medium">Multilingual: medium</option>
        <option value="Xenova/whisper-large-v2">Multilingual: large-v2 (very heavy)</option>
        <option value="Xenova/whisper-large-v3-turbo">Multilingual: large-v3-turbo (very heavy)</option>
        <option value="onnx-community/whisper-large-v3-turbo">Multilingual: large-v3-turbo (ONNX community)</option>
        <option value="onnx-community/lite-whisper-large-v3-turbo-ONNX">Multilingual: large-v3-turbo lite (quantized ONNX)</option>
      </select>

      <label for="language">Language</label>
      <select id="language">
        <option value="en">English</option>
        <option value="es">Spanish</option>
        <option value="zh">Chinese</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="it">Italian</option>
        <option value="pt">Portuguese</option>
        <option value="ru">Russian</option>
        <option value="ja">Japanese</option>
        <option value="ko">Korean</option>
        <option value="ar">Arabic</option>
        <option value="hi">Hindi</option>
        <option value="tr">Turkish</option>
        <option value="nl">Dutch</option>
        <option value="pl">Polish</option>
        <option value="id">Indonesian</option>
        <option value="vi">Vietnamese</option>
        <option value="th">Thai</option>
        <option value="uk">Ukrainian</option>
        <option value="fa">Persian</option>
      </select>

      <div class="controls controls-three">
        <button id="load" class="secondary">Load model</button>
        <button id="start">Start</button>
        <button id="stop" class="secondary">Stop</button>
      </div>

      <details class="tuning-panel">
        <summary>Speed Tuning</summary>
        <div class="tuning-grid">
          <label for="tune-window-seconds">Window (s)</label>
          <input id="tune-window-seconds" type="number" min="0.8" max="12" step="0.1" />

          <label for="tune-min-seconds">Min audio (s)</label>
          <input id="tune-min-seconds" type="number" min="0.1" max="5" step="0.1" />

          <label for="tune-dispatch-ms">Dispatch (ms)</label>
          <input id="tune-dispatch-ms" type="number" min="100" max="5000" step="50" />

          <label for="tune-chunk-length">Chunk len (s)</label>
          <input id="tune-chunk-length" type="number" min="1" max="30" step="0.1" />

          <label for="tune-stride-length">Stride (s)</label>
          <input id="tune-stride-length" type="number" min="0.1" max="15" step="0.1" />

          <label for="tune-silence-threshold">Silence RMS</label>
          <input id="tune-silence-threshold" type="number" min="0" max="0.05" step="0.001" />

          <label for="tune-voice-hold-ms">Voice hold (ms)</label>
          <input id="tune-voice-hold-ms" type="number" min="0" max="5000" step="50" />

          <label for="tune-base-window-seconds">Base window (s)</label>
          <input id="tune-base-window-seconds" type="number" min="0.5" max="12" step="0.1" />

          <label for="tune-base-chunk-length">Base chunk (s)</label>
          <input id="tune-base-chunk-length" type="number" min="1" max="30" step="0.1" />

          <label for="tune-base-stride-length">Base stride (s)</label>
          <input id="tune-base-stride-length" type="number" min="0.1" max="15" step="0.1" />
        </div>
        <button id="apply-tuning" class="secondary" type="button">Apply tuning now</button>
      </details>

      <section class="installed-panel">
        <h2>Installed Models</h2>
        <ul id="installed-models" class="installed-list">
          <li>None yet</li>
        </ul>
      </section>

      <p id="status">Idle</p>
      <p id="model-state" class="model-state"></p>
      <pre id="load-debug" class="load-debug">No model activity yet.</pre>
      <pre id="load-log" class="load-log">No logs yet.</pre>
      <p class="hint">Choose language from dropdown (no typing).</p>
      <p class="hint">Captures tab audio only (not microphone).</p>
      <p class="hint" id="build-version"></p>
    </main>

    <script type="module" src="popup.js"></script>
  </body>
</html>
